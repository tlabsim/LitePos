<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LitePOS - Point of Sale System</title>
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/layout.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/print.css">
    <link rel="stylesheet" href="styles/modal.css">
    <link rel="stylesheet" href="styles/utilities.css">
    <link rel="stylesheet" href="styles/misc.css">
</head>
<body data-theme="light">
    
    <!-- App Container -->
    <div class="app-container">
        
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar-container">
            <!-- Sidebar Navigation -->
            <div class="sidebar-logo">
                <div id="sidebar-logo-container" class="sidebar-logo-icon">
                    <img id="sidebar-logo-img" class="sidebar-logo-img" style="display: none;" alt="Logo">
                    <span id="sidebar-logo-text">৳</span>
                </div>
                <span class="sidebar-logo-text" id="sidebar-shop-name">LitePOS</span>
            </div>

            <nav class="sidebar-nav">
                <button class="sidebar-nav-item active" data-tab="sale" onclick="LitePos.switchTab('sale')">
                    <svg class="sidebar-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" />
                    </svg>
                    <span class="sidebar-nav-label">POS</span>
                </button>

                <button class="sidebar-nav-item" data-tab="sales" onclick="LitePos.switchTab('sales')">
                    <svg class="sidebar-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z" />
                    </svg>
                    <span class="sidebar-nav-label">Sales</span>
                </button>

                <button class="sidebar-nav-item" data-tab="products" onclick="LitePos.switchTab('products')">
                    <svg class="sidebar-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" />
                    </svg>
                    <span class="sidebar-nav-label">Products</span>
                </button>

                <button class="sidebar-nav-item" data-tab="customers" onclick="LitePos.switchTab('customers')">
                    <svg class="sidebar-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z" />
                    </svg>
                    <span class="sidebar-nav-label">Customers</span>
                </button>

                <button class="sidebar-nav-item" data-tab="register" onclick="LitePos.switchTab('register')" style="display: none;">
                    <svg class="sidebar-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 00-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 01-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 003 15h-.75M15 10.5a3 3 0 11-6 0 3 3 0 016 0zm3 0h.008v.008H18V10.5zm-12 0h.008v.008H6V10.5z" />
                    </svg>
                    <span class="sidebar-nav-label">Register</span>
                </button>

                <button class="sidebar-nav-item" data-tab="reports" onclick="LitePos.switchTab('reports')">
                    <svg class="sidebar-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z" />
                    </svg>
                    <span class="sidebar-nav-label">Reports</span>
                </button>
            </nav>

            <div class="sidebar-footer">
                <button class="sidebar-nav-item" data-tab="admin" onclick="LitePos.switchTab('admin')">
                    <svg class="sidebar-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    <span class="sidebar-nav-label">Settings</span>
                </button>

                <div class="sidebar-divider"></div>
                
                <div class="sidebar-user" id="sidebar-user-info">
                    <svg class="sidebar-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                    <div class="sidebar-user-info">
                        <div class="sidebar-user-name" id="sidebar-user-name">Not signed in</div>
                        <div class="sidebar-user-role" id="sidebar-user-role"></div>
                    </div>
                </div>
                
                <button class="sidebar-nav-item" id="sidebar-logout-btn" onclick="logout()">
                    <svg class="sidebar-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9" />
                    </svg>
                    <span class="sidebar-nav-label">Logout</span>
                </button>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content">
            
            <!-- Tab Views Container -->
            <div class="tab-views">
                
                <!-- POS View (Sale) -->
                <div id="view-sale" class="tab-view active">
<!-- TAB: POS SALE -->
<div class="grid-main">
    <!-- LEFT: NEW SALE & OPEN SALES -->
    <div class="stack-gap">
    <div class="card">
            <div class="card-header sale-card-header">
            <h2 class="card-title">
                <span id="cart-title-text">New Sale</span>
                <span id="cart-subheader-bn" class="subheader-bn">· নতুন বিক্রয়</span>
                <span id="summary-sale-id-display" class="badge sale-id-display" style="margin-left: 12px">Sale ID: <span id="summary-sale-id-value">New</span></span>
            </h2>
            <div class="sale-header-right">
                <div id="sale-header-total" class="sale-header-total">৳ 0.00</div>
            </div>
        </div>
       
        <div class="card-body stack-gap">
            <!-- Product search + overlay (left) and customer moved to right panel -->
            <div class="search-bar-row">
                <input id="product-search" type="text" class="field-input large"
                       placeholder="Search by name, SKU, or barcode... (Alt+P)" autocomplete="off">
                <button id="btn-clear-product-search" class="btn btn-ghost" type="button" title="Clear search">✕</button>
                <button id="toggle-all-products" class="btn btn-ghost btn-toggle" type="button" aria-pressed="false">All products</button>
            </div>

            <div id="product-overlay" class="product-overlay hidden">
                <div class="product-overlay-inner">
                    <table>
                        <thead>
                            <tr><th>Product</th><th>SKU</th><th style="width: 120px;">Barcode</th><th>Category</th><th>Sell</th><th>Stock</th><th></th></tr>
                        </thead>
                        <tbody id="product-overlay-body"></tbody>
                    </table>
                </div>
            </div>

            <!-- Cart (products list removed; overlay used instead) -->
            <div>
                <div class="section-header">
                    <span class="section-title-large">
                        Cart · কার্ট
                    </span>
                    <div class="section-sub-group">
                        <span id="cart-count-chip" class="cart-count-chip hidden">0 items</span>
                        <!-- <span class="section-sub">
                            Current sale
                        </span> -->
                    </div>
                </div>
                <div id="cart-table-wrapper" class="table-wrapper table-large" style="min-height: 280px;">
                    <table>
                        <thead>
                        <tr>
                            <th style="width: 30%;">Item</th>
                            <th style="max-width: 18%;">Barcode/SKU</th>
                            <th>Qty</th>
                            <th>Price</th>
                            <th>Disc.</th>
                            <th>Total</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody id="cart-table-body">
                        <!-- Filled by JS -->
                        </tbody>
                    </table>
                </div>
                <div id="cart-empty-state" class="empty-state hidden">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" />
                    </svg>
                    <h3>Cart is empty</h3>
                    <p>Search or scan a product to add it to this sale.</p>
                </div>
            </div>

            <!-- Sale actions -->
            <div id="sale-actions-row" class="sale-control-row">
                <div class="sale-buttons-left">
                    <button id="btn-new-sale" class="btn btn-bilingual btn-ghost btn-xl" type="button">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="btn-icon">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
                        </svg>
                        <span class="btn-labels">
                            <span class="btn-label-en">New sale (Alt+N)</span>
                            <span class="btn-label-bn">নতুন বিক্রয় (Alt+N)</span>
                        </span>
                    </button>
                    <button id="btn-cancel-sale" class="btn btn-bilingual btn-ghost btn-xl" type="button">
                        <span class="btn-icon">✕</span>
                        <span class="btn-labels">
                            <span class="btn-label-en">Cancel Sale</span>
                            <span class="btn-label-bn">বিক্রয় বাতিল করুন</span>
                        </span>
                    </button>
                    <button id="btn-cancel-edit-sale" class="btn btn-bilingual btn-ghost btn-xl" type="button" style="display: none;">
                        <span class="btn-icon">✕</span>
                        <span class="btn-labels">
                            <span class="btn-label-en">Cancel Sale Update</span>
                            <span class="btn-label-bn">বিক্রয় আপডেট বাতিল করুন</span>
                        </span>
                    </button>
                </div>
                <div class="sale-buttons-right">
                    <button id="btn-hold-sale" class="btn btn-bilingual btn-accent btn-xl" type="button">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="btn-icon">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 5.25v13.5m-7.5-13.5v13.5" />
                        </svg>
                        <span class="btn-labels">
                            <span class="btn-label-en">Hold / Save (Alt+H)</span>
                            <span class="btn-label-bn">সংরক্ষণ করুন (Alt+H)</span>
                        </span>
                    </button>
                    <button id="btn-revert-changes" class="btn btn-bilingual btn-ghost btn-xl" type="button" style="display: none;">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="btn-icon">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
                        </svg>
                        <span class="btn-labels">
                            <span class="btn-label-en">Revert Changes</span>
                            <span class="btn-label-bn">আগের অবস্থায় ফিরে যান</span>
                        </span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Open Sales Card -->
    <div id="open-sales-card" class="card hidden">
        <div class="card-header">
            <h2 class="card-title">
                Open Sales
                <span class="subheader-bn">· চলমান বিক্রয়</span>
            </h2>
            <p class="card-sub">Use Resume to bring a held sale back to the cart</p>
        </div>
        <div class="card-body">
            <div class="table-wrapper">
                <table class="open-sales-table">
                    <thead>
                        <tr>
                            <th>Sale ID</th>
                            <th>Customer</th>
                            <th style="text-align: center;">Items</th>
                            <th style="text-align: right;">Total</th>
                            <th style="text-align: center;">Time</th>
                            <th style="width: 80px;">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="open-sales-list">
                        <!-- JS fills open sales rows -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    </div>

    <!-- RIGHT: TOTALS / PAYMENT / RECEIPT -->
    <div class="stack-gap">
        <!-- Customer card (moved above payment) -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">
                    Customer
                    <span class="subheader-bn">· গ্রাহক</span>
                </h2>
            </div>
            <div class="card-body stack-gap">
                <div class="field" style="position:relative">
                    <label class="field-label">Customer Phone · গ্রাহকের মোবাইল</label>
                    <div style="display: flex; justify-content: space-between; align-items: center; gap: 10px;">
                        <div class="input-row" style="flex: 1; margin: 0;">
                            <input id="sale-customer-phone" type="tel" class="field-input"
                                   placeholder="e.g. 017XXXXXXXX" inputmode="tel" autocomplete="off">
                            <button id="btn-clear-customer-phone" class="btn btn-ghost btn-lg" type="button" title="Clear">✕</button>
                            <button id="btn-search-customer" class="btn btn-ghost btn-lg" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="btn-icon">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
                                </svg>
                            </button>
                        </div>
                        <span id="summary-customer-badge" class="customer-badge">Walk-in</span>
                    </div>
                    <!-- customer overlay positioned relative to field container -->
                    <div id="customer-overlay" class="product-overlay hidden">
                        <div class="product-overlay-inner">
                            <table>
                                <thead>
                                    <tr><th>Name</th><th>Phone</th><th>Address</th><th></th></tr>
                                </thead>
                                <tbody id="customer-overlay-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>                            
                <div class="stack-gap-sm ">
                    <div class="field">
                        <label class="field-label">Customer Name · গ্রাহকের নাম</label>
                        <input id="sale-customer-name" type="text" class="field-input" placeholder="Name (নাম)" autocomplete="off">
                    </div>
                    <input id="quick-customer-address" type="text" class="field-input field-input-sm grow" placeholder="Address (ঠিকানা)">
                    <div class="row-between">
                        <input id="quick-customer-notes" type="text" class="field-input field-input-sm grow" placeholder="Notes (নোট)">
                        <div class="row-gap">
                            <button id="btn-save-quick-customer" class="btn btn-accent btn-md" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 16px; height: 16px; display: inline-block; vertical-align: middle; margin-right: 4px;">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                                </svg>
                                Save
                            </button>
                            <button id="btn-clear-customer" class="btn btn-ghost btn-md" type="button">✕ Clear</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Payment & Summary card -->
        <div class="card">
        <div class="card-header">
            <h2 class="card-title">
                Payment &amp; Summary
                <span class="subheader-bn">· পেমেন্ট সারাংশ</span>
            </h2>
            <p class="card-sub">
                Discounts, payment and change. Keyboard: Alt+C to complete.
            </p>
        </div>
        <div class="card-body">
            <div class="stack-gap-none">
                <!-- Subtotal (read-only) -->
                <div class="payment-row">
                    <label class="payment-label">Subtotal · সাবটোটাল</label>
                    <div id="summary-subtotal" class="payment-value money">৳ 0.00</div>
                </div>

                <!-- Discount section -->
                <div class="payment-row" style="flex-direction: column; gap: 8px; align-items: stretch;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <label class="payment-label">Discount · ছাড়
                            <span id="discount-percentage" class="payment-value" style="font-size: 15px; color: var(--accent-alt); margin-left: 12px; min-width: 50px; text-align: right;">0%</span>
                        </label>
                        <div id="summary-discount" class="payment-value money">৳ 0.00</div>
                    </div>
                    
                    <!-- Product-level discounts (read-only) -->
                    <div id="product-discount-row" style="display: none; padding-left: 12px; font-size: 14px; color: var(--text-secondary);">
                        <span>Product discounts: </span>
                        <span id="product-discount-value" class="money">৳ 0.00</span>
                    </div>
                    
                    <!-- Manual discount input -->
                    <div style="display: flex; gap: 8px; align-items: center; padding-left: 12px;">
                        <label style="font-size: 14px; color: var(--text-secondary); white-space: nowrap;">Manual:</label>
                        <input id="input-discount" type="number" class="payment-input-clean"
                            value="0" min="0" step="1" style="flex: 1;">
                        <select id="discount-type" class="field-input field-input-sm" style="width: 80px;">
                            <option value="amount">৳</option>
                            <option value="percentage">%</option>
                        </select>
                    </div>
                </div>

                <!-- Total (read-only, emphasized) -->
                <div class="payment-row payment-row-total">
                    <label class="payment-label">Total Payable · মোট</label>
                    <div id="summary-total" class="payment-value money payment-total">৳ 0.00</div>
                </div>

                <!-- Payment Method Selection -->
                <div class="payment-row" style="flex-direction: column; align-items: flex-start; gap: 8px;">
                    <label class="payment-label">Payment Method · পেমেন্ট পদ্ধতি</label>
                    <div class="payment-method-pills">
                        <button type="button" class="payment-method-pill active" data-method="cash">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="payment-logo">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z" />
                            </svg>
                            <span>Cash</span>
                        </button>
                        <button type="button" class="payment-method-pill" data-method="card">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="payment-logo">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z" />
                            </svg>
                            <span>Card</span>
                        </button>
                        <button type="button" class="payment-method-pill" data-method="bkash">
                            <!-- <img src="https://www.logo.wine/a/logo/BKash/BKash-Icon-Logo.wine.svg" alt="bKash" class="payment-logo"> -->
                            <svg xmlns="http://www.w3.org/2000/svg" class="payment-logo" viewBox="-18.0015 -28.3525 156.013 170.115"><g fill="none"><path fill="#D12053" d="M96.58 62.45l-53.03-8.31 7.03 31.6z"/><path fill="#E2136E" d="M96.58 62.45L56.62 6.93 43.56 54.15z"/><path fill="#D12053" d="M42.32 53.51L.45 0l54.83 6.55z"/><path fill="#9E1638" d="M23.25 31.15L0 9.24h6.12z"/><path fill="#D12053" d="M107.89 35.46l-9.84 26.69L82.1 40.09z"/><path fill="#E2136E" d="M56.77 84.14l38.61-15.51L97 63.7z"/><path fill="#9E1638" d="M25.89 113.41l16.54-58.02 8.39 37.75z"/><path fill="#E2136E" d="M109.43 35.67l-4.06 11.02 14.64-.24z"/></g></svg>
                            <span>bKash</span>
                        </button>
                        <button type="button" class="payment-method-pill" data-method="nagad">
                            <!-- <img src="https://www.logo.wine/a/logo/Nagad/Nagad-Logo.wine.svg" alt="Nagad" class="payment-logo"> -->
                             <svg xmlns="http://www.w3.org/2000/svg" class="payment-logo" xml:space="preserve" y="0" x="0" id="Layer_1" version="1.1" viewBox="-45 -32.75825 390 196.5495"><style id="style1431" type="text/css">.st0{fill:#eb2329}.st1{fill:#f89621}</style><style type="text/css" id="style1431-6">.st0{fill:#eb2329}.st1{fill:#f89621}</style><style type="text/css" id="style1384">.st0{fill:#ed1c24}.st1{fill:#f7941d}</style><g transform="translate(-1266.194 -110.295) scale(2.59472)" id="g1438"><g id="g1406" transform="translate(481.988 41.407)"><g id="g1390"><path id="path1386" d="M80.6 20.7H60.4c-.4 0-.6.3-.6.6v1.6c0 .4.3.6.6.6h15.1v8.4c-.4-.6-.9-1.2-1.4-1.8-1.8-1.8-3.7-2.7-5.7-2.7-1.6 0-2.9.8-4 2.2-.9 1.2-1.4 2.6-1.4 3.9 0 1.3.2 3 1.2 4.6 1.2 1.9 3.2 2.5 5 2.5 2.3 0 4.2-1.6 4.2-3.7 0-1.2-.6-2.2-1.7-2.9l-1.1-.6v1.8c-.1.5-.9 1.2-1.8 1.2-.8 0-1.5-.3-2-.8-.3-.3-.5-.9-.4-1.3 0-.6.2-1.1.6-1.6.5-.6 1-.9 1.8-.9 2 0 3.7.9 5.1 2.9 1.1 1.7 1.7 3.3 1.7 5.1V44l3 1.8c.1.1.2.1.3.1.4 0 .6-.3.6-.6V23.6h1.2c.4 0 .6-.3.6-.6v-1.6c0-.4-.3-.7-.7-.7z" class="st0" fill="#ed1c24"/><path id="path1388" d="M121 20.7H95.4c-.4 0-.6.3-.6.6v2.8c-2.5-2.6-4.7-3.9-6.7-3.9-1.9 0-3.5.4-4.9 1.5-1.3 1-2.1 2.3-2.1 3.8 0 4.5 5 4.4 6.3 3.8.2-.1.5-.3.8-.3 1 0 1.4.8 1.4 1.5 0 1-1.5 1.9-3.3 1.9-1 0-1.6-.3-2-.9l-.8-1.2-.5 1.4c-.1.3-.3.7-.3 1.2 0 1 .5 2 1.5 2.9.9.8 2 1.2 3.2 1.2 1.9 0 3.5-.7 4.5-2.1.9-1.1 1.3-2.4 1.3-3.9 0-.8-.3-1.7-1-2.7-.8-1.2-1.8-1.8-2.9-1.8-.4 0-.9.1-1.4.3-.2.1-.6.2-.7.2-.2 0-.5-.1-.7-.4-.2-.2-.4-.5-.4-1 0-1.1 1-2.2 2.8-2.2h.1c1.2 0 2.4.6 3.5 1.7.9.9 1.6 1.8 2.2 2.8v15.9l3 1.8c.1.1.2.1.3.1.4 0 .6-.3.6-.6V23.6h4.6v13.9l3.6 1.5h.2c.3 0 .6-.2.6-.6v-.1c.6-4.1 2.4-6.9 5.4-8.6v.8c0 .6 0 2.1.1 2.9 0 .5 0 .8.1 1.1 0 1.6.2 4 .7 5.8 1 3.4 2.7 4.2 3.9 4.2h.1c.7 0 1.3-.2 1.7-.6.2-.2.5-.6.5-1.3 0-.6-.1-1.1-.3-1.5l-.3-.5-.6.1c-.6.2-.9.2-.9.1h-.1c-.2 0-.2 0-.3-.1-.2-.1-.6-.4-.9-1.5-.2-.8-.3-1.9-.3-2.5 0-4.5.9-7.9 2.4-8.6h.1c.2-.1.4-.3.4-.6 0-.1 0-.2-.1-.3v-.1c-.7-1.4-2.2-2.4-4.2-2.9h-.4c-1.6.3-3.5 1.4-5.9 3.4-.6.5-1.2 1-1.7 1.5v-5.5h14c.4 0 .6-.3.6-.6v-1.6c.1-.4-.2-.7-.6-.7z" class="st0" fill="#ed1c24"/></g><path id="path1392" d="M53.2 28.1c0 .7 0 1.3-.1 1.9-.2 2.8-.9 5.4-2 7.8-.4 1-.9 1.9-1.5 2.8-4.2 6.6-11.6 11-20 11-3.6 0-7-.8-10-2.2C11.6 45.7 6 37.5 6 28.1 6 18.8 11.4 10.8 19.1 7c-.6.8-1.2 1.6-1.7 2.5 0 .1-.1.1-.1.2-.3.3-.6.5-.9.8-.4.3-.7.7-1.1 1l-.2.2-.2.2c-.1.1-.2.3-.4.4-.2.3-.5.6-.7.9-1 1.3-1.8 2.7-2.4 4.2-.1.1-.1.3-.2.4-.1.2-.1.4-.2.5 0 .1-.1.2-.1.3-.1.3-.2.5-.3.8-.1.2-.1.4-.2.5 0 .1-.1.2-.1.3 0 .2-.1.4-.1.6l-.3 1.8c0 .2 0 .3-.1.5v2.4c0 6.4 2.9 12.2 7.6 15.9 3.6 2.9 8.1 4.7 13 4.7 4.5 0 8.6-1.4 12-3.9 2.5-1.8 4.5-4.1 6-6.8.2-.4.4-.7.6-1.1 1.2-2.5 1.9-5.2 1.9-8.1v-.7c0-.7 0-1.3-.1-2l.1.1c.3.3.6.5.9.8.3-.5.6-.9.9-1.4.2.9.3 1.8.4 2.8.1.9.1 1.6.1 2.3z" class="st0" fill="#ed1c24"/><path id="path1394" d="M32.4 9.2L28 1.1c-7.3 3.3-12.3 10.6-12.3 19.1 0 4.3 1.3 8.3 3.5 11.6-.2-1.1-.2-2.2-.2-3.4.1-8.7 5.6-16.1 13.4-19.2z" class="st1" fill="#f7941d"/><path id="path1396" d="M35.9 13.2c1.8-.5 3.8-.7 5.7-.7 1.2 0 2.5.1 3.6.3l-.1-3.6-.2-7.2c-.8-.1-1.7-.2-2.6-.2-4 0-7.7 1.3-10.7 3.4L34 9.6c-4.3 1.5-7.8 4.5-10 8.4-1.1 1.9-1.9 4.1-2.2 6.4.6-1.2 1.3-2.3 2.1-3.3 2.9-3.8 7.1-6.7 12-7.9z" class="st0" fill="#ed1c24"/><path id="path1398" d="M46.4 9.1l.2 5.1c-1.7-.5-3.4-.8-5.3-.8-3.5 0-6.8 1-9.7 2.7-3.6 2.2-6.4 5.7-7.8 9.8 1.4-1.9 3.1-3.6 5.1-4.9 2.9-1.9 6.4-3 10.1-3 2.8 0 5.4.6 7.8 1.7 1.8.8 3.4 1.9 4.8 3.3l2.8-4.2 3.6-5.5c-3.2-2.6-7.2-4.2-11.6-4.2z" class="st1" fill="#f7941d"/><path id="path1400" d="M50.9 25.7v.7c0 4.2-1.7 7.7-1.9 8.1-.2.4-.4.7-.6 1.1-1.5 2.7-3.5 5-6 6.8-3.4 2.4-7.5 3.9-12 3.9-4.9 0-9.5-1.7-13-4.7-4.6-3.8-7.6-9.5-7.6-15.9v-2.4c0-.2 0-.3.1-.5l.3-1.8c0-.2.1-.4.1-.6 0-.1.1-.2.1-.3.1-.2.1-.4.2-.5.1-.3.2-.6.3-.8 0-.1.1-.2.1-.3.1-.2.1-.4.2-.5.1-.1.1-.3.2-.4.6-1.5 1.5-2.9 2.4-4.2.2-.3.5-.6.7-.9.1-.1.2-.3.4-.4.1-.1.1-.2.2-.2.1-.1.1-.2.2-.2.3-.4.7-.7 1.1-1 .3-.3.6-.5.9-.8 0 .1-.1.1-.1.2s-.1.2-.1.2c-1.2 2.4-2 5.3-2.3 8.3-.1.8-.1 1.6-.1 2.5 0 10.8 6.3 19.5 14.1 19.5h.8c1.1 0 2.2-.2 3.3-.4 5.3-1.4 9.2-6.3 9.2-12v-.3c-.1-3.4-1.5-6.5-3.8-8.6 1.6 0 3.2.3 4.7.7 2.9.7 5.5 2.1 7.8 3.9l.1.1c-.1.4 0 1.1 0 1.7z" class="st1" fill="#f7941d"/><g id="g1404"><path id="path1402" d="M50.9 25.7v.7c0 4.4-2 8.2-2 8.2-.2.4-.4.7-.6 1.1-1.5 2.7-3.6 5-6.1 6.8-3.5 2.6-7.7 3.9-12.1 3.9-4.8 0-9.4-1.7-13.1-4.7-4.8-3.9-7.6-9.8-7.6-16 0-6.2 2.8-12.1 7.6-16l.2-.2c0 .1-.1.1-.1.2s-.1.1-.1.2c-4.7 3.9-7.4 9.6-7.4 15.8 0 6.2 2.7 11.9 7.5 15.9 3.6 3 8.3 4.6 13 4.6 4.3 0 8.5-1.3 12-3.9 2.5-1.8 4.5-4.1 6-6.8.2-.4.4-.7.5-1.1 0 0 2-3.7 2-8.1v-.7c0-.7 0-1.3-.1-2v-.1l.1.1.1.1c.2.8.2 1.4.2 2z" class="st1" fill="#f7941d"/></g></g></g></svg>
                            <span>Nagad</span>
                        </button>
                    </div>
                </div>

                <!-- Payment Details (for Card/bKash/Nagad) -->
                <div id="payment-details-row" class="payment-row hidden" style="flex-direction: column; align-items: flex-start; gap: 4px;">
                    <label class="payment-label" for="input-payment-details">Payment Details</label>
                    <input id="input-payment-details" type="text" class="field-input field-input-sm" 
                           placeholder="Card number, bKash number, etc." style="width: 100%;">
                </div>

                <!-- Payment input with "Same as Payable" button -->
                <div class="payment-row">
                    <label class="payment-label" for="input-payment">Payment Received · প্রাপ্ত&nbsp;
                        <button id="btn-same-as-total" class="btn btn-ghost btn-md" type="button">
                            Same as Payable
                        </button>
                    </label>
                    <div style="display: flex; gap: 8px; align-items: center;">                                    
                        <input id="input-payment" type="number" class="payment-input-clean"
                            value="0" min="0" step="1" style="flex: 1;">
                    </div>
                </div>

                <!-- Change (read-only) -->
                <div id="payment-row-change" class="payment-row">
                    <label class="payment-label">Change · ফেরত</label>
                    <div id="summary-change" class="payment-value money">৳ 0.00</div>
                </div>

                <!-- Due (only shown when payment < total for saved customers) -->
                <div id="payment-row-due" class="payment-row hidden">
                    <label class="payment-label" style="color: var(--danger);">Due · বকেয়া</label>
                    <div id="summary-due" class="payment-value money" style="color: var(--danger); font-weight: 700;">৳ 0.00</div>
                </div>

                <!-- Sale info -->
                <div class="payment-row">
                    <label class="payment-label">Items in Cart</label>
                    <div id="summary-items-count" class="payment-value">0</div>
                </div>

                <div class="payment-row">
                    <label class="payment-label">Sale Status</label>
                    <div id="summary-sale-status" class="payment-value">New</div>
                </div>
            </div>

            <div class="sale-actions-bottom">
                <button id="btn-complete-sale" class="btn btn-bilingual btn-primary btn-xxl" type="button">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="btn-icon">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                    </svg>
                    <span class="btn-labels">
                        <span class="btn-label-en"><span class="btn-text-main">Complete &amp; Close Sale</span> (Alt+C)</span>
                        <span class="btn-label-bn"><span class="btn-text-main">বিক্রয় সম্পন্ন করুন</span> (Alt+C)</span>
                    </span>
                </button>
                <!-- Clear Cart button - replaced with Finish Editing when editing sale
                <button id="btn-clear-cart" class="btn btn-bilingual btn-ghost btn-xl" type="button">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="btn-icon">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                    <span class="btn-labels">
                        <span class="btn-label-en">Clear cart</span>
                        <span class="btn-label-bn">কার্ট খালি করুন</span>
                    </span>
                </button>
                -->
                <button id="btn-finish-editing" class="btn btn-bilingual btn-ghost btn-xl" type="button" style="display: none;">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="btn-icon">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <span class="btn-labels">
                        <span class="btn-label-en">Finish Editing</span>
                        <span class="btn-label-bn">সম্পাদনা শেষ করুন</span>
                    </span>
                </button>
            </div>

            <div class="section-separator"></div>

            <div class="receipt-actions">
                <div class="field">
                    <label class="field-label">Receipt size · রিসিপ্ট সাইজ</label>
                    <select id="receipt-size" class="field-input field-input-sm">
                        <option value="a4">A4 (ফুল সাইজ)</option>
                        <option value="80mm">80mm roll (৮০ মিমি রোল)</option>
                        <option value="58mm">58mm roll (৫৮ মিমি রোল)</option>
                    </select>
                </div>
                <button id="btn-print-last-receipt" class="btn btn-bilingual btn-ghost btn-xl" type="button">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="btn-icon">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0110.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0l.229 2.523a1.125 1.125 0 01-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0021 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 00-1.913-.247M6.34 18H5.25A2.25 2.25 0 013 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 011.913-.247m10.5 0a48.536 48.536 0 00-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5zm-3 0h.008v.008H15V10.5z" />
                    </svg>
                    <span class="btn-labels">
                        <span class="btn-label-en"><span class="btn-text-main">Print last receipt</span> (Alt+R)</span>
                        <span class="btn-label-bn"><span class="btn-text-main">রিসিপ্ট প্রিন্ট করুন</span> (Alt+R)</span>
                    </span>
                </button>
            </div>

            <div class="summary-card small">
                <div class="summary-header">
                    <span>Today snapshot · আজকের সারাংশ</span>
                    <span id="today-summary-small" class="summary-meta">—</span>
                </div>
                <div class="summary-meta">
                    Salesperson: <span id="today-salesperson-name">—</span><br>
                    Last sale: <span id="today-last-sale">—</span>
                </div>
            </div>

            <div class="keyboard-help collapsed">
                <div class="keyboard-help-header">
                    <h3 style="margin:0">Keyboard shortcuts</h3>
                    <button id="btn-toggle-keyboard-help" class="btn btn-ghost" aria-expanded="false" type="button">Show</button>
                </div>
                <div class="keyboard-help-body" id="keyboard-help-body">
                    <ul>
                        <li>Alt+1..6: Switch tabs (POS, Customers, Products, Sales, Reports, Admin)</li>
                        <li>Alt+F: Focus customer phone</li>
                        <li>Alt+P: Focus product search</li>
                        <li>Alt+N: New sale</li>
                        <li>Alt+H: Hold / save open sale</li>
                        <li>Alt+C: Complete sale</li>
                        <li>Alt+R: Print last receipt</li>
                        <li>Esc: Close popups / blur field</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

<!-- HIDDEN RECEIPT (for printing) -->
<div id="receipt-print" class="receipt-print">
    <!-- Standard Template -->
    <div id="receipt-standard" class="receipt-inner receipt-template">
        <div class="receipt-header">
            <img id="receipt-logo-standard" class="receipt-logo" style="display: none; max-width: 120px; max-height: 80px; margin: 0 auto 10px;">
            <h2 id="receipt-shop-name">Shop Name</h2>
            <div id="receipt-shop-address">Address</div>
            <div id="receipt-shop-phone">Phone</div>
        </div>
        <hr>
        <div id="receipt-sale-meta"></div>
        <table class="receipt-table">
            <thead>
            <tr>
                <th>Item</th>
                <th>Qty</th>
                <th>Price</th>
                <th>Total</th>
            </tr>
            </thead>
            <tbody id="receipt-items-body"></tbody>
        </table>
        <hr>
        <div class="receipt-totals">
            <div><span>Subtotal</span><span id="receipt-subtotal"></span></div>
            <div><span>Discount</span><span id="receipt-discount"></span></div>
            <div><span>Total</span><span id="receipt-total"></span></div>
            <div><span>Payment</span><span id="receipt-payment"></span></div>
            <div id="receipt-change-row"><span>Change</span><span id="receipt-change"></span></div>
            <div id="receipt-due-row" style="display: none;"><span>Due</span><span id="receipt-due"></span></div>
        </div>
        <p class="receipt-note">ধন্যবাদ! আবার আসবেন।</p>
    </div>
    
    <!-- Compact Template -->
    <div id="receipt-compact" class="receipt-inner receipt-template" style="display: none;">
        <div class="receipt-header-compact">
            <img id="receipt-logo-compact" class="receipt-logo-compact" style="display: none; max-width: 80px; max-height: 50px; margin: 0 auto 5px;">
            <h3 id="receipt-shop-name-compact" style="margin: 0; font-size: 16px;">Shop Name</h3>
            <div id="receipt-shop-address-compact" style="font-size: 10px;">Address</div>
            <div id="receipt-shop-phone-compact" style="font-size: 10px;">Phone</div>
        </div>
        <hr style="margin: 8px 0;">
        <div id="receipt-sale-meta-compact" style="font-size: 10px; margin-bottom: 8px;"></div>
        <table class="receipt-table-compact" style="font-size: 10px;">
            <thead>
            <tr>
                <th>Item</th>
                <th>Q</th>
                <th>Price</th>
                <th>Tot</th>
            </tr>
            </thead>
            <tbody id="receipt-items-body-compact"></tbody>
        </table>
        <hr style="margin: 8px 0;">
        <div class="receipt-totals-compact" style="font-size: 11px;">
            <div><span>Subtotal</span><span id="receipt-subtotal-compact"></span></div>
            <div><span>Discount</span><span id="receipt-discount-compact"></span></div>
            <div style="font-weight: bold; font-size: 12px;"><span>Total</span><span id="receipt-total-compact"></span></div>
            <div><span>Payment</span><span id="receipt-payment-compact"></span></div>
            <div id="receipt-change-row-compact"><span>Change</span><span id="receipt-change-compact"></span></div>
            <div id="receipt-due-row-compact" style="display: none;"><span>Due</span><span id="receipt-due-compact"></span></div>
        </div>
        <p class="receipt-note" style="font-size: 10px; margin-top: 8px;">ধন্যবাদ! আবার আসবেন।</p>
    </div>
</div>
                </div>
                
                <!-- Products View -->
                <div id="view-products" class="tab-view">
<div class="grid-main" style="position: relative;">
                <!-- LEFT COLUMN: Products List -->
                <div class="stack-gap">
                    <div class="card">
                        <div class="card-header">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                                <div style="flex: 1;">
                                    <h2 class="card-title">Products
                                        <span class="subheader-bn">· পণ্যসমূহ</span>
                                    </h2>
                                    <p class="card-sub" style="margin-top: 4px;">
                                        Buying price, selling price, stock &amp; low-stock warnings.
                                    </p>
                                </div>
                                <span class="badge" id="product-count-badge" style="background: var(--primary); color: white; padding: 4px 12px; margin-top: 16px; border-radius: 12px; font-size: 13px; white-space: nowrap;">0 products</span>
                            </div>
                        </div>
                        <div class="card-body stack-gap">
                            <div style="display: flex; gap: 8px; align-items: center; flex-wrap: wrap;">
                                <input id="product-manage-search" type="text" class="field-input"
                                       placeholder="Search by name, SKU, barcode, or category..." autocomplete="off" style="flex: 1; min-width: 250px;">
                                <select id="product-filter-category" class="field-input" style="min-width: 180px;">
                                    <option value="">All Categories</option>
                                    <!-- Filled by JS -->
                                </select>
                                <select id="product-filter-brand" class="field-input" style="min-width: 150px;">
                                    <option value="">All Brands</option>
                                    <!-- Filled by JS -->
                                </select>
                                <select id="product-filter-supplier" class="field-input" style="min-width: 150px;">
                                    <option value="">All Suppliers</option>
                                    <!-- Filled by JS -->
                                </select>
                                <select id="product-sort" class="field-input" style="min-width: 150px;">
                                    <option value="name-asc">Name (A-Z)</option>
                                    <option value="name-desc">Name (Z-A)</option>
                                    <option value="buy-asc">Buy Price (Low-High)</option>
                                    <option value="buy-desc">Buy Price (High-Low)</option>
                                    <option value="sell-asc">Sell Price (Low-High)</option>
                                    <option value="sell-desc">Sell Price (High-Low)</option>
                                    <option value="stock-asc">Stock (Low-High)</option>
                                    <option value="stock-desc">Stock (High-Low)</option>
                                </select>
                                <label style="display: flex; align-items: center; gap: 6px; font-size: 14px; cursor: pointer; white-space: nowrap;">
                                    <input id="product-filter-low-stock" type="checkbox" style="cursor: pointer;">
                                    <span>Low stock</span>
                                </label>
                                <div class="field" style="min-width: 180px;">
                                    <select id="product-filter-discount" class="field-input field-input-sm">
                                        <option value="all">All products</option>
                                        <option value="no-discount">No discount</option>
                                        <option value="active-discount">Active discount</option>
                                        <option value="inactive-discount">Inactive discount</option>
                                    </select>
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span id="product-total-count" style="font-size: 14px; color: var(--text-soft); font-weight: 500;">0 total | Showing page 1 of 1</span>
                                <div style="display: flex; gap: 8px;">
                                    <button id="btn-product-prev-page" class="btn btn-ghost" type="button" disabled>&lt; Prev</button>
                                    <button id="btn-product-next-page" class="btn btn-ghost" type="button" disabled>Next &gt;</button>
                                </div>
                            </div>
                            <div class="table-wrapper">
                                <table>
                                    <thead>
                                    <tr>
                                        <th style="width: 60px;">ID</th>
                                        <th style="width: 18%;">Name</th>
                                        <th>SKU / Barcode</th>
                                        <th>Category</th>
                                        <th>Brand / Supplier</th>
                                        <th>Buy (৳)</th>
                                        <th>Sell (৳)</th>
                                        <th>Stock</th>
                                        <!-- <th>Low?</th> -->
                                    </tr>
                                    </thead>
                                    <tbody id="products-table-body">
                                    <!-- Filled by JS -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <style>
                    #product-details-column[data-editing="true"] .add-edit-product-header {
                        display: none;
                    }
                </style>

                <!-- RIGHT COLUMN: Forms -->
                <div id="product-details-column" class="ghost-scrollable" style="position:sticky !important; top: 0;" data-editing="false">
                    <div id="editing-product-header" class="sticky-bar" style="display: none;">
                        <h3>Editing product</h3>
                        <button id="btn-clear-product-edit" class="btn btn-ghost btn-sm" type="button" title="Cancel edit">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="btn-icon">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                            </svg>
                        </button>
                        <script>
                            document.getElementById('btn-clear-product-edit').addEventListener('click', function() {
                                window.clearProductForm();
                            });
                        </script>
                    </div>
                    <div class="card">
                        <div class="card-header add-edit-product-header">
                            <div>
                                <h2 class="card-title">
                                    Add / Edit Product
                                    <span class="subheader-bn">· পণ্য যোগ/সম্পাদনা</span>
                                </h2>
                                <p class="card-sub">
                                    Tap a product row to load.
                                </p>
                            </div>
                        </div>
                        
                        <div class="card-body stack-gap">
                            <div class="field">
                                <label class="field-label">Product Name</label>
                                <input id="product-edit-name" type="text" class="field-input" autocomplete="off">
                            </div>
                            <div class="field">
                                <label class="field-label">Barcode(s) <span style="font-weight: 400; font-size: 12px; color: var(--text-soft);">(Press Space or Comma to add)</span></label>
                                <div id="barcode-tag-container" class="field-input barcode-tag-container">
                                    <!-- Barcode tags will be added here dynamically -->
                                    <input id="product-edit-barcode" type="text" class="barcode-tag-input" autocomplete="off" placeholder="Scan or type barcode...">
                                </div>
                                <input id="product-edit-barcode-hidden" type="hidden">
                            </div>
                            <div class="two-col">
                                <div class="field">
                                    <label class="field-label">SKU <span style="font-weight: 400; font-size: 12px; color: var(--text-soft);">(optional)</span></label>
                                    <input id="product-edit-sku" type="text" class="field-input" autocomplete="off">
                                </div>
                                <div class="field">
                                    <label class="field-label">Category</label>
                                    <input id="product-edit-category" type="text" class="field-input" autocomplete="off" placeholder="e.g., Electronics, Food" list="category-suggestions">
                                    <datalist id="category-suggestions">
                                        <!-- Filled by JS -->
                                    </datalist>
                                </div>
                            </div>
                            <div class="two-col">
                                <div class="field">
                                    <label class="field-label">Brand</label>
                                    <input id="product-edit-brand" type="text" class="field-input" autocomplete="off" placeholder="e.g., Samsung, Nike" list="brand-suggestions">
                                    <datalist id="brand-suggestions">
                                        <!-- Filled by JS -->
                                    </datalist>
                                </div>
                                <div class="field">
                                    <label class="field-label">Supplier</label>
                                    <input id="product-edit-supplier" type="text" class="field-input" autocomplete="off" placeholder="e.g., ABC Traders" list="supplier-suggestions">
                                    <datalist id="supplier-suggestions">
                                        <!-- Filled by JS -->
                                    </datalist>
                                </div>
                            </div>
                        </div>  
                        <div class="two-col">
                            <div class="field">
                                <label class="field-label">Buying Price (৳)</label>
                                <input id="product-edit-buy" type="number" class="field-input" min="0" step="1">
                            </div>
                            <div class="field">
                                <label class="field-label">Selling Price (৳)</label>
                                <input id="product-edit-sell" type="number" class="field-input" min="0" step="1">
                            </div>
                        </div>
                        
                        <!-- Discount Section -->
                        <div class="card-body" style="background: var(--background-soft); border-radius: 8px; padding: 16px; margin-top: 16px;">
                            <h3 style="margin: 0 0 12px 0; font-size: 15px; font-weight: 600;">Discount <span style="font-weight: 400; color: var(--text-soft);">(optional)</span></h3>
                            <div class="two-col">
                                <div class="field">
                                    <label class="field-label">Discount Value</label>
                                    <input id="product-edit-discount" type="number" class="field-input" min="0" step="0.01" placeholder="0">
                                </div>
                                <div class="field">
                                    <label class="field-label">Discount Type</label>
                                    <select id="product-edit-discount-type" class="field-input">
                                        <option value="amount">৳ Amount</option>
                                        <option value="percentage">% Percentage</option>
                                    </select>
                                </div>
                            </div>
                            <div class="field">
                                <label class="field-label">Discount Valid Until <span style="font-weight: 400; font-size: 12px; color: var(--text-soft);">(optional)</span></label>
                                <input id="product-edit-discount-until" type="date" class="field-input" placeholder="Leave empty for no expiry">
                            </div>
                        </div>
                        
                        <div class="two-col" style="margin-top: 16px;">
                            <div class="field">
                                <label class="field-label">Stock</label>
                                <input id="product-edit-stock" type="number" class="field-input" min="0" step="1">
                                <p class="hint-text" style="margin-top: 4px; font-size: 12px;">Stock can only be set for new products. For existing products, use stock adjustment below.</p>
                            </div>
                            <div class="field">
                                <label class="field-label">Low stock alert at</label>
                                <input id="product-edit-low" type="number" class="field-input" min="0" step="1">
                            </div>
                        </div>
                        <div class="input-row">
                            <button id="btn-save-product" class="btn btn-primary btn-xl" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 20px; height: 20px; display: inline-block; vertical-align: middle; margin-right: 6px;">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-12L10.125 2.25z" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 17.25h-9m9-4.5h-9m5.25-9v6.75h-6.75" />
                                </svg>
                                Save product
                            </button>
                            <button id="btn-new-product" class="btn btn-ghost btn-xl" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 20px; height: 20px; display: inline-block; vertical-align: middle; margin-right: 6px;">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                                </svg>
                                New
                            </button>
                            <button id="btn-delete-product" class="btn btn-ghost btn-xl" type="button" style="display: none; color: var(--danger); margin-left: auto;">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 20px; height: 20px; display: inline-block; vertical-align: middle; margin-right: 6px;">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0" />
                                </svg>
                                Delete
                            </button>
                        </div>
                        <p class="hint-text">
                            Low stock products will be highlighted with warning badge.
                        </p>
                    </div>

                    <!-- Sales with this Product Card (only visible for existing products) -->
                    <div id="product-sales-card" class="card" style="display: none; margin-top: 16px;">
                        <div class="card-header">
                            <div>
                                <span class="card-title">Sales with this Product</span>
                                <p class="card-sub">
                                    View sales history for <strong id="product-sales-name">this product</strong>
                                </p>
                            </div>
                        </div>
                        <div class="card-body stack-gap">
                            <div class="kpi-grid" style="grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));">
                                <div class="kpi-card">
                                    <div class="kpi-label">Total sales</div>
                                    <div id="product-sales-count" class="kpi-value" style="font-size: 24px;">0</div>
                                </div>
                                <div class="kpi-card">
                                    <div class="kpi-label">Units sold</div>
                                    <div id="product-sales-qty" class="kpi-value" style="font-size: 24px;">0</div>
                                </div>
                                <div class="kpi-card">
                                    <div class="kpi-label">Revenue</div>
                                    <div id="product-sales-revenue" class="kpi-value" style="font-size: 24px;">৳0</div>
                                </div>
                            </div>
                            <button id="btn-view-product-sales" class="btn btn-primary" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 18px; height: 18px; display: inline-block; vertical-align: middle; margin-right: 6px;">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                </svg>
                                View all sales
                            </button>
                        </div>
                    </div>

                    <!-- Stock Adjustment Card (only visible for existing products) -->
                    <div id="stock-adjustment-card" class="card" style="display: none; margin-top: 16px;">
                        <div class="card-header">
                            <div>
                                <span class="card-title">Stock Adjustment</span>
                                <p class="card-sub">
                                    Update inventory for selected product. Current stock: <strong id="stock-current-value">0</strong>
                                </p>
                            </div>
                        </div>
                        <div class="card-body stack-gap">
                            <div class="two-col">
                                <div class="field">
                                    <label class="field-label">Adjustment Quantity</label>
                                    <input id="stock-adjustment-qty" type="number" class="field-input" step="1" placeholder="e.g., 10 or -5">
                                    <p class="hint-text" style="margin-top: 4px; font-size: 12px;">Positive = add stock, Negative = reduce stock</p>
                                </div>
                                <div class="field">
                                    <label class="field-label">Date</label>
                                    <input id="stock-adjustment-date" type="date" class="field-input">
                                </div>
                            </div>
                            <div class="field">
                                <label class="field-label">Note (optional)</label>
                                <input id="stock-adjustment-note" type="text" class="field-input" placeholder="e.g., New shipment, Damaged items, etc.">
                            </div>
                            <div class="input-row">
                                <button id="btn-save-stock-adjustment" class="btn btn-primary btn-xl" type="button">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 20px; height: 20px; display: inline-block; vertical-align: middle; margin-right: 6px;">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                                    </svg>
                                    Apply Adjustment
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Stock Updates Log Card (collapsible) -->
                    <div id="stock-updates-card" class="card" style="display: none; margin-top: 16px;">
                        <div class="card-header" style="cursor: pointer;" id="stock-updates-header">
                            <div>
                                <span class="card-title">Stock Update History</span>
                                <p class="card-sub">
                                    View all stock adjustments for this product
                                </p>
                            </div>
                            <button type="button" class="btn btn-ghost" id="btn-toggle-stock-updates" style="margin-left: auto;">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 16px; height: 16px; display: inline-block; vertical-align: middle; margin-right: 4px;">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                                </svg>
                                Expand
                            </button>
                        </div>
                        <div class="card-body stack-gap" id="stock-updates-body" style="display: none; margin-top: 12px;">
                            <div class="table-wrapper">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Change</th>
                                            <th>Before</th>
                                            <th>After</th>
                                            <th>Note</th>
                                        </tr>
                                    </thead>
                                    <tbody id="stock-updates-table-body">
                                        <!-- Filled by JS -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>   
                </div>                   
            </div>

                </div>
                
                <!-- Sales View -->
                <div id="view-sales" class="tab-view">
<div class="card card-full">
                <div class="card-header">
                    <h2 class="card-title">
                        All Sales
                        <span class="subheader-bn">· সব বিক্রয়</span>
                    </h2>
                    <p class="card-sub">
                        Filter by date range, status, salesperson, customer.
                    </p>
                </div>
                <div class="card-body stack-gap">
                    <div class="grid-25" style="align-items: end;">
                        <div class="field grow">
                            <label class="field-label">Date Range</label>
                            <select id="sales-filter-date-range" class="field-input field-input-sm">
                                <option value="custom">Custom</option>
                                <option value="today">Today</option>
                                <option value="last7days" selected>Last 7 days</option>
                                <option value="last30days">Last 30 days</option>
                                <option value="thismonth">This month</option>
                                <option value="last3months">Last 3 months</option>
                                <option value="last6months">Last 6 months</option>
                                <option value="thisyear">This year</option>
                                <option value="alltime">All time</option>
                            </select>
                        </div>
                        <div class="field grow">
                            <label class="field-label">From date</label>
                            <input id="sales-filter-from" type="date" class="field-input field-input-sm">
                        </div>
                        <div class="field grow">
                            <label class="field-label">To date</label>
                            <input id="sales-filter-to" type="date" class="field-input field-input-sm">
                        </div>
                        <div class="field grow">
                            <label class="field-label">Status</label>
                            <select id="sales-filter-status" class="field-input field-input-sm">
                                <option value="all">All</option>
                                <option value="open">Open</option>
                                <option value="closed">Closed</option>
                                <option value="withdue">With due</option>
                            </select>
                        </div>
                        <div class="field grow">
                            <label class="field-label">Search (customer, phone, sale ID)</label>
                            <input id="sales-filter-query" type="text" class="field-input field-input-sm" autocomplete="off">
                        </div>
                        <div class="field grow">
                            <label class="field-label">Payment method</label>
                            <select id="sales-filter-payment-method" class="field-input field-input-sm">
                                <option value="all">All</option>
                                <option value="cash">Cash</option>
                                <option value="card">Card</option>
                                <option value="bkash">bKash</option>
                                <option value="nagad">Nagad</option>
                            </select>
                        </div>                    
                        <div class="field grow">
                            <label class="field-label">Salesperson</label>
                            <select id="sales-filter-user" class="field-input field-input-sm">
                                <option value="all">All</option>
                            </select>
                        </div>                        
                        <button id="btn-sales-clear-filters" class="btn btn-ghost btn-sm grow" style="height: 32px;" type="button">                            
                            Clear filters
                        </button>
                    </div>
                    <div id="sales-global-summary-container"></div>
                    <div class="table-wrapper">
                        <table>
                            <thead>
                            <tr>
                                <th style="width: 80px;">Sale ID</th>
                                <th style="width: 10%;">Time</th>
                                <th style="width: 14%;">Customer</th>
                                <th style="width: 11%;">Phone</th>
                                <th style="width: 11%;">Salesperson</th>
                                <th style="width: 9%;">Payment</th>
                                <th style="width: 8%;">Status</th>
                                <th style="width: 6%;">Items</th>
                                <th style="width: 9%;">Total (৳)</th>
                                <th style="width: 10%;">Profit / Due (৳)</th>
                                <th style="width: 300px;">Actions</th>
                            </tr>
                            </thead>
                            <tbody id="sales-table-body">
                            <!-- Filled by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

                </div>
                
                <!-- Customers View -->
                <div id="view-customers" class="tab-view">
<div class="grid-main">
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">
                Customers
                <span class="subheader-bn">· গ্রাহক তালিকা</span>
            </h2>
            <p class="card-sub">
                Phone-centered customer management. ফোন নম্বর দিয়ে খুঁজুন।
            </p>
        </div>
        <div class="card-body stack-gap">
            <div class="filter-row">
                <input id="customer-search" type="text" class="field-input"
                       placeholder="Search by name or phone..." autocomplete="off">
            </div>
            <div class="table-wrapper">
                <table>
                    <thead>
                    <tr>
                        <th style="width: 20%;">Name</th>
                        <th style="width: 15%;" class="center">Phone</th>
                        <th style="width: 18%;">Address</th>
                        <th>Notes</th>
                        <th style="width: 12%;" class="center">Debt</th>
                        <th style="width: 15%;">Last sale</th>
                        <th style="width: 8%;" class="center">Actions</th>
                    </tr>
                    </thead>
                    <tbody id="customers-table-body">
                    <!-- Filled by JS -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <h2 class="card-title">
                Edit Customer
                <span class="subheader-bn">· গ্রাহক সম্পাদনা</span>
            </h2>
            <p class="card-sub">
                Tap a row to load. Saving uses phone as unique key.
            </p>
        </div>
        <div class="card-body stack-gap">
            <div class="two-col">
                <div class="field">
                    <label class="field-label">Name</label>
                    <input id="customer-edit-name" type="text" class="field-input" autocomplete="off">
                </div>
                <div class="field">
                    <label class="field-label">Phone</label>
                    <input id="customer-edit-phone" type="tel" class="field-input" autocomplete="off">
                </div>
            </div>
            <div class="field">
                <label class="field-label">Address</label>
                <input id="customer-edit-address" type="text" class="field-input" autocomplete="off">
            </div>
            <div class="field">
                <label class="field-label">Notes</label>
                <input id="customer-edit-notes" type="text" class="field-input" autocomplete="off">
            </div>
            <div class="field">
                <label class="field-label">Max Debt Limit (override global)</label>
                <input id="customer-edit-debt-limit" type="number" class="field-input" min="0" step="1" placeholder="Leave empty to use global default" autocomplete="off">
                <p class="field-help">Maximum debt allowed for this customer. Leave empty to use global default from POS Settings.</p>
            </div>
            <div class="input-row">
                <button id="btn-save-customer-edit" class="btn btn-primary btn-xl" type="button">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 20px; height: 20px; display: inline-block; vertical-align: middle; margin-right: 4px;">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-12L10.125 2.25z" />
                      <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 17.25h-9m9-4.5h-9m5.25-9v6.75h-6.75" />
                    </svg>
                    Save customer
                </button>
                <button id="btn-new-customer" class="btn btn-ghost btn-xl" type="button">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 20px; height: 20px; display: inline-block; vertical-align: middle; margin-right: 4px;">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                    </svg>
                    New
                </button>
            </div>
        </div>
    </div>
</div>

                </div>
                
                <!-- Reports View -->
                <div id="view-reports" class="tab-view">
<div class="grid-two">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            KPIs &amp; Chart
                            <span class="subheader-bn">· সারাংশ</span>
                        </h2>
                        <p class="card-sub">
                            Total sales, today’s sales, customers, and profit.
                        </p>
                    </div>
                    <div class="card-body stack-gap">
                        <div class="kpi-grid">
                            <div class="kpi-card">
                                <div class="kpi-label">Total sales value · মোট বিক্রয়</div>
                                <div id="kpi-total-sales" class="kpi-value">৳ 0.00</div>
                                <div id="kpi-total-sales-count" class="kpi-sub">0 invoices</div>
                            </div>
                            <div class="kpi-card">
                                <div class="kpi-label">Today’s sales · আজকের বিক্রয়</div>
                                <div id="kpi-today-sales" class="kpi-value">৳ 0.00</div>
                                <div id="kpi-today-sales-count" class="kpi-sub">0 invoices</div>
                            </div>
                            <div class="kpi-card">
                                <div class="kpi-label">Total profit · মোট লাভ</div>
                                <div id="kpi-total-profit" class="kpi-value">৳ 0.00</div>
                                <div id="kpi-profit-margin" class="kpi-sub">—</div>
                            </div>
                            <div class="kpi-card">
                                <div class="kpi-label">Customers · গ্রাহক সংখ্যা</div>
                                <div id="kpi-customers-count" class="kpi-value">0</div>
                                <div class="kpi-sub">Unique phone numbers</div>
                            </div>
                            <div class="kpi-card">
                                <div class="kpi-label">Open sales · চলমান বিক্রয়</div>
                                <div id="kpi-open-sales" class="kpi-value">0</div>
                                <div class="kpi-sub">Can be resumed</div>
                            </div>
                        </div>
                        <div class="field">
                            <label class="field-label">
                                Last 7 days chart · গত ৭ দিনের বিক্রয়
                            </label>
                            <canvas id="salesChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="card card-printable-report">
                    <div class="card-header">
                        <h2 class="card-title">
                            Export / Print Report
                            <span class="subheader-bn">· রিপোর্ট এক্সপোর্ট</span>
                        </h2>
                        <p class="card-sub">
                            Export sales report as CSV or print a clean summary.
                        </p>
                    </div>
                    <div class="card-body stack-gap">
                        <div class="field">
                            <label class="field-label">
                                Report period
                            </label>
                            <div class="filter-row">
                                <input id="report-from" type="date" class="field-input field-input-sm">
                                <input id="report-to" type="date" class="field-input field-input-sm">
                            </div>
                        </div>
                        <div class="input-row">
                            <button id="btn-export-csv" class="btn btn-primary btn-xl" type="button">
                                ⬇ Export CSV
                            </button>
                            <button id="btn-print-report" class="btn btn-ghost btn-xl" type="button">
                                🖨 Print report
                            </button>
                        </div>
                        <div id="report-print-area" class="report-print-area">
                            <h2>Sales report</h2>
                            <p id="report-print-period">Period: —</p>
                            <table class="report-print-table">
                                <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Invoices</th>
                                    <th>Total (৳)</th>
                                    <th>Profit (৳)</th>
                                </tr>
                                </thead>
                                <tbody id="report-print-body">
                                <!-- Filled by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

                </div>
                
                <!-- Admin View -->
                <div id="view-admin" class="tab-view">
<div class="grid-50">
                <!-- SHOP SETTINGS -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            Shop Settings
                            <span class="subheader-bn">· দোকানের তথ্য</span>
                        </h2>
                        <p class="card-sub">
                            Set shop name, address, phone. Used in header and receipts.
                        </p>
                    </div>
                    <div class="card-body stack-gap">
                        <div class="field">
                            <label class="field-label">Shop Name</label>
                            <input id="shop-name" type="text" class="field-input" autocomplete="off">
                        </div>
                        <div class="field">
                            <label class="field-label">Address</label>
                            <input id="shop-address" type="text" class="field-input" autocomplete="off">
                        </div>
                        <div class="field">
                            <label class="field-label">Phone</label>
                            <input id="shop-phone" type="text" class="field-input" autocomplete="off">
                        </div>
                        <div class="field">
                            <label class="field-label">Shop Logo (max 200KB)</label>
                            <input id="shop-logo-input" type="file" accept="image/*" class="field-input" style="padding: 8px;">
                            <div id="shop-logo-preview" style="margin-top: 10px; display: none;">
                                <img id="shop-logo-preview-img" style="max-width: 200px; max-height: 100px; border: 1px solid rgba(148, 163, 184, 0.3); border-radius: 8px; padding: 4px; background: #fff;">
                                <button id="btn-remove-logo" class="btn btn-ghost" type="button" style="margin-left: 10px; padding: 4px 12px;">Remove Logo</button>
                            </div>
                        </div>
                        <button id="btn-save-shop-settings" class="btn btn-ghost btn-xl" type="button">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="btn-icon">
                                <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
                            </svg>
                            Save settings
                        </button>
                    </div>
                </div>

                <!-- GLOBAL SETTINGS -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            Global Settings
                            <span class="subheader-bn">· গ্লোবাল সেটিংস</span>
                        </h2>
                        <p class="card-sub">
                            Application-wide preferences and defaults.
                        </p>
                    </div>
                    <div class="card-body stack-gap">
                        <div class="stack-gap">
                            <div class="field">
                                <label class="field-label">Currency Symbol (e.g. ৳, TK)</label>
                                <input id="global-currency-symbol" type="text" class="field-input" value="৳" maxlength="3" autocomplete="off">
                            </div>
                            <div class="field">
                                <label class="field-label">Timezone</label>
                                <select id="global-timezone" class="field-input">
                                    <option value="-12">UTC-12:00</option>
                                    <option value="-11">UTC-11:00</option>
                                    <option value="-10">UTC-10:00</option>
                                    <option value="-9">UTC-09:00</option>
                                    <option value="-8">UTC-08:00</option>
                                    <option value="-7">UTC-07:00</option>
                                    <option value="-6">UTC-06:00</option>
                                    <option value="-5">UTC-05:00</option>
                                    <option value="-4">UTC-04:00</option>
                                    <option value="-3">UTC-03:00</option>
                                    <option value="-2">UTC-02:00</option>
                                    <option value="-1">UTC-01:00</option>
                                    <option value="0">UTC+00:00</option>
                                    <option value="1">UTC+01:00</option>
                                    <option value="2">UTC+02:00</option>
                                    <option value="3">UTC+03:00</option>
                                    <option value="4">UTC+04:00</option>
                                    <option value="5">UTC+05:00</option>
                                    <option value="5.5">UTC+05:30 (India)</option>
                                    <option value="6">UTC+06:00 (Bangladesh)</option>
                                    <option value="7">UTC+07:00</option>
                                    <option value="8">UTC+08:00</option>
                                    <option value="9">UTC+09:00</option>
                                    <option value="10">UTC+10:00</option>
                                    <option value="11">UTC+11:00</option>
                                    <option value="12">UTC+12:00</option>
                                </select>
                            </div>
                            <div class="field">
                                <label class="field-label">Default Print Size</label>
                                <select id="global-print-size" class="field-input">
                                    <option value="a4">A4 (210mm × 297mm)</option>
                                    <option value="80mm">80mm Roll (৮০ মিমি রোল)</option>
                                    <option value="58mm">58mm Roll (৫৮ মিমি রোল)</option>
                                </select>
                            </div>
                            <div class="field">
                                <label class="field-label">Default Print Template</label>
                                <select id="global-print-template" class="field-input">
                                    <option value="standard">Standard</option>
                                    <option value="compact">Compact</option>
                                </select>
                            </div>
                        </div>
                        <button id="btn-save-global-settings" class="btn btn-ghost btn-xl" type="button">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="btn-icon">
                                <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
                            </svg>
                            Save global settings
                        </button>
                    </div>
                </div>

                <!-- POS SETTINGS -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            POS Settings
                            <span class="subheader-bn">· পিওএস সেটিংস</span>
                        </h2>
                        <p class="card-sub">
                            Point of Sale specific preferences.
                        </p>
                    </div>
                    <div class="card-body stack-gap">
                        <div class="stack-gap">
                            <div class="field">
                                <label class="field-label checkbox-label">
                                    <input id="pos-enable-due" type="checkbox" class="field-checkbox">
                                    <span>Enable Due/Debt Tracking</span>
                                </label>
                                <p class="field-help">Allow customers to owe money (partial payments). Disable to require full payment on all sales.</p>
                            </div>
                            <div class="field">
                                <label class="field-label">Max Debt Limit (Global Default)</label>
                                <input id="pos-max-debt-limit" type="number" class="field-input" min="0" step="1" placeholder="0 = unlimited" autocomplete="off">
                                <p class="field-help">Default maximum debt allowed per customer. Set to 0 for unlimited. Can be overridden per customer.</p>
                            </div>
                            <div class="field">
                                <label class="field-label checkbox-label">
                                    <input id="pos-split-barcode-entries" type="checkbox" class="field-checkbox">
                                    <span>Split Cart Entries by Barcode</span>
                                </label>
                                <p class="field-help">When enabled, products with multiple barcodes will create separate cart entries for each barcode scanned. Useful for tracking which specific barcode was used.</p>
                            </div>
                            <div class="field">
                                <label class="field-label">Animation Level</label>
                                <select id="pos-animation-level" class="field-input">
                                    <option value="normal">Normal</option>
                                    <option value="reduced">Reduced</option>
                                </select>
                                <p class="field-help">Reduce animations for better performance or accessibility. Reduced mode disables bilingual button animations.</p>
                            </div>
                        </div>
                        <button id="btn-save-pos-settings" class="btn btn-ghost btn-xl" type="button">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="btn-icon">
                                <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
                            </svg>
                            Save POS settings
                        </button>
                    </div>
                </div>

                <!-- USERS MANAGEMENT -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            Users &amp; Roles
                            <span class="subheader-bn">· ব্যবহারকারী</span>
                        </h2>
                        <p class="card-sub">
                            Manage Superadmin and Salesperson accounts.
                        </p>
                    </div>
                    <div class="card-body stack-gap">
                        <div class="table-wrapper small-table">
                            <table>
                                <thead>
                                <tr>
                                    <th style="width: 30%;">Name</th>
                                    <th>Username</th>
                                    <th>Role</th>
                                </tr>
                                </thead>
                                <tbody id="users-table-body">
                                <!-- Filled by JS -->
                                </tbody>
                            </table>
                        </div>
                        <div class="two-col">
                            <div class="field">
                                <label class="field-label">Name</label>
                                <input id="user-edit-name" type="text" class="field-input" autocomplete="off">
                            </div>
                            <div class="field">
                                <label class="field-label">Username</label>
                                <input id="user-edit-username" type="text" class="field-input" autocomplete="off">
                            </div>
                        </div>
                        <div class="two-col">
                            <div class="field">
                                <label class="field-label">PIN</label>
                                <input id="user-edit-pin" type="password" class="field-input" maxlength="6" autocomplete="off">
                            </div>
                            <div class="field">
                                <label class="field-label">Role</label>
                                <select id="user-edit-role" class="field-input">
                                    <option value="sales">Salesperson</option>
                                    <option value="superadmin">Superadmin</option>
                                </select>
                            </div>
                        </div>
                        <div class="input-row">
                            <button id="btn-save-user" class="btn btn-ghost btn-xl" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="btn-icon">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 12.75 6 6 9-13.5" />
                                </svg>
                                Save user
                            </button>
                            <button id="btn-new-user" class="btn btn-ghost btn-xl" type="button">
                                + New
                            </button>
                        </div>
                        <p class="hint-text">
                            Username is unique. Changing PIN will overwrite existing.
                        </p>
                    </div>
                </div>

                 <!-- BACKUP / RESTORE -->
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            Backup &amp; Restore
                            <span class="subheader-bn">· ব্যাকআপ</span>
                        </h2>
                        <p class="card-sub">
                            Download a JSON backup of products, customers, sales, users, and settings.
                            Restore only if you trust the file.
                        </p>
                    </div>
                    <div class="card-body stack-gap">
                        <div class="input-row">
                            <button id="btn-backup-download" class="btn btn-primary btn-xl" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="btn-icon">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3" />
                                </svg>
                                Download backup (JSON)
                            </button>
                            <button id="btn-backup-download-encrypted" class="btn btn-accent-alt btn-xl" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="btn-icon">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z" />
                                </svg>
                                Download encrypted backup
                            </button>
                            <label class="btn btn-ghost btn-xl file-label">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="btn-icon">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18" />
                                </svg>
                                Restore from file
                                <input id="backup-file-input" type="file" accept=".json" hidden>
                            </label>
                        </div>
                        <p class="hint-text">
                            <strong>Encrypted backup:</strong> Password-protected using AES-256-GCM encryption. Keep your password safe - it cannot be recovered!<br>
                            <strong>Regular backup:</strong> Plain JSON format (not password protected).<br>
                            Backup includes: users, products, customers, sales, and shop settings. Restoring will replace current local data.
                        </p>
                    </div>
                </div>
            </div>

                </div>

                </div>
                
            </div>
            
        </main>
        
    </div>
    
    <!-- Toast container -->
    <div id="toast-container"></div>
    
    <!-- Scripts -->
    <!-- Core Libraries -->
    <script src="app/loader.js"></script>
    <script src="app/modules/db.js"></script>
    <script src="app/modules/utils.js"></script>
    <script src="app/modules/ui.js"></script>
    <script src="app/modules/session.js"></script>
    
    <!-- Feature Modules -->
    <script src="app/modules/pos.js"></script>
    <script src="app/modules/products.js"></script>
    <script src="app/modules/sales.js"></script>
    <script src="app/modules/customers.js"></script>
    <script src="app/modules/reports.js"></script>
    <script src="app/modules/admin.js"></script>
    
    <!-- Legacy Core (for backward compatibility during migration) -->
    <script src="app/core.js"></script>
    
    <!-- Main App Script -->
    <script src="app.js"></script>
    
    <!-- Initialize App -->
    <script>
        // Apply saved theme immediately
        LitePos.applySavedTheme();
        
        // Initialize (no async loading needed - everything is inline)
        LitePos.initializeApp();
        
        // Restore last active tab
        LitePos.restoreLastTab();
        
        console.log('[App] LitePOS loaded successfully');
    </script>
    
</body>
</html>
